"use strict";var ShowPictrue=function(){LocalContractStorage.defineMapProperty(this,"itemsArr");LocalContractStorage.defineMapProperty(this,"itemsObj")};ShowPictrue.prototype={init:function(){var e=+new Date();var b=[{timestamp:e,data:"这是一个测试"}];var d={picArr:[],advers:"这是一个测试"};var c=JSON.stringify(b);var a=JSON.stringify(d);this.itemsArr.set("items",c);e=e+"";this.itemsObj.set(e,a)},add:function(h,a,p,o,n,l,k,j){var i=this.itemsArr.get("items");i=JSON.parse(i);var c=0;if(i.length>=1){var b=i[i.length-1].timestamp;var f=+new Date();if(b+2*60*60*1000<f){c=f}else{c=b+2*60*60*1000}i.push({timestamp:c,data:h})}else{c=+new Date();i.push({timestamp:c,data:h})}var e=JSON.stringify(i);this.itemsArr.set("items",e);var m=[];m.push(a);m.push(p);m.push(o);m.push(n);m.push(l);m.push(k);m.push(j);var d={};d.picArr=m;d.advers=h;d.timestamp=c;var g=JSON.stringify(d);c=c+"";this.itemsObj.set(c,g)},get:function(){var l=this.itemsArr.get("items");l=JSON.parse(l);var b=+new Date();var g=l.length;var e="没有";var d=0;if(g>=3){for(var f=1;f<=g-1;f++){if(b>=l[f-1].timestamp&&b<l[f].timestamp){e=l[f-1].timestamp;d=f;break}if(b>=l[g-1].timestamp){e=l[g-1].timestamp;d=g-1}}}else{if(g==2){if(b>=l[0].timestamp&&b<l[1].timestamp){e=l[0].timestamp;d=0}else{e=l[1].timestamp;d=1}}else{if(g==1){e=l[0].timestamp}else{e=l[0].timestamp}}}e=e+"";var h=this.itemsObj.get(e);h=JSON.parse(h);var m={};m.obj=h;var a=[];for(var c=d;c<g;c++){a.push(l[c])}m.todo=a;return JSON.stringify(m)},test:function(){var a=JSON.parse(this.itemsArr.get("items"));var c=[];for(var b=0;b<a.length;b++){c.push(this.itemsObj.get(a[b]+""))}return JSON.stringify(c)}};module.exports=ShowPictrue;